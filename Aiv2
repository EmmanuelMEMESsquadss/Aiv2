-- REAL FE INVISIBLE SCRIPT - WORKS FOR OTHER PLAYERS
-- Deletes all body parts except HumanoidRootPart + Humanoid
-- You stay alive, can move, and hit others while invisible
-- DRAGGABLE MOBILE-FRIENDLY BUTTONS

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local IsInvisible = false
local CollisionLoop = nil

-- Create GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "FEInvisibleCorrectGui"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Create Invisible Toggle Button
local InvisibleButton = Instance.new("TextButton")
InvisibleButton.Name = "InvisibleButton"
InvisibleButton.Size = UDim2.new(0, 160, 0, 55)
InvisibleButton.Position = UDim2.new(0, 10, 0.5, -30)
InvisibleButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
InvisibleButton.BorderSizePixel = 2
InvisibleButton.BorderColor3 = Color3.fromRGB(0, 255, 0)
InvisibleButton.Text = "üëª Invisible: OFF"
InvisibleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
InvisibleButton.TextSize = 17
InvisibleButton.Font = Enum.Font.GothamBold
InvisibleButton.Active = true
InvisibleButton.Draggable = true -- DRAGGABLE!
InvisibleButton.Parent = ScreenGui

-- Add rounded corners
local InvisCorner = Instance.new("UICorner")
InvisCorner.CornerRadius = UDim.new(0, 12)
InvisCorner.Parent = InvisibleButton

-- Function to make character ACTUALLY invisible
local function MakeInvisible()
    if IsInvisible then return end
    
    local Character = LocalPlayer.Character
    if not Character then return end
    
    local HumanoidRootPart = Character:FindFirstChild("HumanoidRootPart")
    local Humanoid = Character:FindFirstChildOfClass("Humanoid")
    
    if not HumanoidRootPart or not Humanoid then 
        warn("[FE INVISIBLE] Missing HumanoidRootPart or Humanoid!")
        return 
    end
    
    -- Store original camera subject
    local OriginalCameraSubject = workspace.CurrentCamera.CameraSubject
    
    -- STEP 1: Delete all body parts except RootPart and Humanoid
    for _, part in pairs(Character:GetChildren()) do
        if part ~= HumanoidRootPart and part ~= Humanoid then
            part:Destroy()
        end
    end
    
    -- STEP 2: Set camera to root part
    workspace.CurrentCamera.CameraSubject = HumanoidRootPart
    
    -- STEP 3: Disable HumanoidRootPart collision (so you can phase through walls)
    HumanoidRootPart.CanCollide = false
    
    -- STEP 4: Keep collision disabled permanently
    CollisionLoop = RunService.Stepped:Connect(function()
        if HumanoidRootPart and HumanoidRootPart.Parent then
            HumanoidRootPart.CanCollide = false
        end
    end)
    
    -- STEP 5: Optional - Add visual indicator for yourself
    local SelectionBox = Instance.new("SelectionBox")
    SelectionBox.Name = "InvisibleIndicator"
    SelectionBox.Adornee = HumanoidRootPart
    SelectionBox.LineThickness = 0.05
    SelectionBox.Color3 = Color3.fromRGB(0, 255, 0)
    SelectionBox.Parent = HumanoidRootPart
    
    -- STEP 6: Disable DisplayDistance to hide name and health
    if Humanoid then
        Humanoid.DisplayDistanceType = Enum.HumanoidDisplayDistanceType.None
    end
    
    IsInvisible = true
    InvisibleButton.Text = "üëª Invisible: ON"
    InvisibleButton.BorderColor3 = Color3.fromRGB(255, 0, 0)
    InvisibleButton.BackgroundColor3 = Color3.fromRGB(60, 20, 20)
    
    -- Show notification
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "FE Invisible";
        Text = "You are now INVISIBLE! Press R to reset when done.";
        Duration = 5;
    })
    
    print("===========================================")
    print("[FE INVISIBLE] SUCCESS!")
    print("‚úÖ All body parts deleted except RootPart")
    print("‚úÖ You are INVISIBLE to all players")
    print("‚úÖ You can still move and attack")
    print("‚úÖ Press R to reset and become visible")
    print("===========================================")
end

-- Function to restore visibility (requires reset)
local function MakeVisible()
    if not IsInvisible then return end
    
    -- Disconnect collision loop
    if CollisionLoop then
        CollisionLoop:Disconnect()
        CollisionLoop = nil
    end
    
    -- Show notification
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "FE Invisible";
        Text = "Resetting to restore character...";
        Duration = 3;
    })
    
    -- Reset character
    wait(1)
    if LocalPlayer.Character then
        LocalPlayer.Character:BreakJoints()
    end
    
    IsInvisible = false
    InvisibleButton.Text = "üëª Invisible: OFF"
    InvisibleButton.BorderColor3 = Color3.fromRGB(0, 255, 0)
    InvisibleButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
end

-- Toggle function
local function ToggleInvisible()
    if IsInvisible then
        MakeVisible()
    else
        MakeInvisible()
    end
end

-- Button click handler
InvisibleButton.MouseButton1Click:Connect(ToggleInvisible)

-- Mobile touch support
InvisibleButton.TouchTap:Connect(ToggleInvisible)

-- Keyboard support (V key)
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.V then
        ToggleInvisible()
    end
end)

-- Handle character respawn
LocalPlayer.CharacterAdded:Connect(function(newChar)
    Character = newChar
    IsInvisible = false
    InvisibleButton.Text = "üëª Invisible: OFF"
    InvisibleButton.BorderColor3 = Color3.fromRGB(0, 255, 0)
    InvisibleButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    
    if CollisionLoop then
        CollisionLoop:Disconnect()
        CollisionLoop = nil
    end
end)

-- Initial notification
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "FE Invisible - CORRECT METHOD";
    Text = "Press V or drag & tap button! Works in ALL games.";
    Duration = 7;
})

print("===========================================")
print("FE INVISIBLE SCRIPT - CORRECT METHOD")
print("===========================================")
print("‚úÖ Press V or tap the DRAGGABLE button")
print("‚úÖ Deletes body parts, keeps HumanoidRootPart")
print("‚úÖ You become INVISIBLE to everyone")
print("‚úÖ You can still MOVE and HIT others")
print("‚úÖ Hides name tag and health bar")
print("‚úÖ Universal - Works in Battlegrounds")
print("‚úÖ NOT BANNABLE - Client-side only")
print("‚ö†Ô∏è  Reset (R) to become visible again")
print("üéÆ Button is DRAGGABLE for mobile!")
print("===========================================")
