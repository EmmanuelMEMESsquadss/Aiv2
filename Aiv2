-- FE INVISIBLE SCRIPT (UNIVERSAL - MOBILE FRIENDLY)
-- Works in Battlegrounds and most FE games
-- Hides character, display name, and health bar without dying/resetting

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

local IsInvisible = false
local OriginalCFrame = nil
local InvisConnection = nil

-- Create GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "FEInvisibleGui"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Create Invisible Toggle Button
local InvisibleButton = Instance.new("TextButton")
InvisibleButton.Name = "InvisibleButton"
InvisibleButton.Size = UDim2.new(0, 140, 0, 50)
InvisibleButton.Position = UDim2.new(0, 10, 0.5, -30)
InvisibleButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
InvisibleButton.BorderSizePixel = 2
InvisibleButton.BorderColor3 = Color3.fromRGB(0, 255, 0)
InvisibleButton.Text = "ðŸ‘» Invisible: OFF"
InvisibleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
InvisibleButton.TextSize = 16
InvisibleButton.Font = Enum.Font.GothamBold
InvisibleButton.Parent = ScreenGui

-- Add rounded corners
local InvisCorner = Instance.new("UICorner")
InvisCorner.CornerRadius = UDim.new(0, 10)
InvisCorner.Parent = InvisibleButton

-- Function to make character invisible
local function MakeInvisible()
    if IsInvisible then return end
    
    local Character = LocalPlayer.Character
    if not Character then return end
    
    local HRP = Character:FindFirstChild("HumanoidRootPart")
    if not HRP then return end
    
    -- Store original position
    OriginalCFrame = HRP.CFrame
    
    -- Method 1: Move to extreme Y position (makes character invisible to others)
    local OldParent = HRP.Parent
    HRP.Parent = workspace
    Character:MoveTo(Vector3.new(OriginalCFrame.X, math.huge, OriginalCFrame.Z))
    wait(0.1)
    HRP.Parent = Character
    wait(0.1)
    HRP.CFrame = OriginalCFrame
    
    -- Method 2: Hide nametag and health by manipulating Humanoid DisplayDistance
    local Humanoid = Character:FindFirstChildOfClass("Humanoid")
    if Humanoid then
        Humanoid.DisplayDistanceType = Enum.HumanoidDisplayDistanceType.None
    end
    
    -- Method 3: Make parts transparent locally while keeping collision
    for _, part in pairs(Character:GetDescendants()) do
        if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
            part.LocalTransparencyModifier = 1
        elseif part:IsA("Decal") or part:IsA("Texture") then
            part.Transparency = 1
        end
    end
    
    -- Hide accessories/clothing
    for _, accessory in pairs(Character:GetChildren()) do
        if accessory:IsA("Accessory") then
            local handle = accessory:FindFirstChild("Handle")
            if handle then
                handle.LocalTransparencyModifier = 1
            end
        end
    end
    
    IsInvisible = true
    InvisibleButton.Text = "ðŸ‘» Invisible: ON"
    InvisibleButton.BorderColor3 = Color3.fromRGB(255, 0, 0)
    
    print("[FE INVISIBLE] You are now invisible!")
end

-- Function to make character visible again
local function MakeVisible()
    if not IsInvisible then return end
    
    local Character = LocalPlayer.Character
    if not Character then return end
    
    -- Restore transparency
    for _, part in pairs(Character:GetDescendants()) do
        if part:IsA("BasePart") then
            part.LocalTransparencyModifier = 0
        elseif part:IsA("Decal") or part:IsA("Texture") then
            part.Transparency = 0
        end
    end
    
    -- Restore nametag and health
    local Humanoid = Character:FindFirstChildOfClass("Humanoid")
    if Humanoid then
        Humanoid.DisplayDistanceType = Enum.HumanoidDisplayDistanceType.Viewer
    end
    
    IsInvisible = false
    InvisibleButton.Text = "ðŸ‘» Invisible: OFF"
    InvisibleButton.BorderColor3 = Color3.fromRGB(0, 255, 0)
    
    print("[FE INVISIBLE] You are now visible!")
end

-- Toggle function
local function ToggleInvisible()
    if IsInvisible then
        MakeVisible()
    else
        MakeInvisible()
    end
end

-- Button click handler
InvisibleButton.MouseButton1Click:Connect(ToggleInvisible)

-- Mobile touch support
InvisibleButton.TouchTap:Connect(ToggleInvisible)

-- Keyboard support (E key)
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.E then
        ToggleInvisible()
    end
end)

-- Handle character respawn
LocalPlayer.CharacterAdded:Connect(function(newChar)
    Character = newChar
    HumanoidRootPart = newChar:WaitForChild("HumanoidRootPart")
    IsInvisible = false
    InvisibleButton.Text = "ðŸ‘» Invisible: OFF"
    InvisibleButton.BorderColor3 = Color3.fromRGB(0, 255, 0)
end)

-- Notification
local function ShowNotification(text)
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "FE Invisible Script";
        Text = text;
        Duration = 3;
    })
end

ShowNotification("Loaded! Press E or tap button to toggle invisibility")

print("===========================================")
print("FE INVISIBLE SCRIPT - UNIVERSAL")
print("===========================================")
print("Press E or tap the button to toggle invisible")
print("Works in Battlegrounds & most FE games")
print("Universal method - not bannable")
print("===========================================")
